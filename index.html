<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Email your Member of Parliament to support the people of Iran. A simple tool for Canadians to contact their representatives.">
    <title>Support the People of Iran - Contact Your MP</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main class="container">
        <header>
            <h1>Support the People of Iran</h1>
            <p class="intro">Use this tool to send a pre-written letter to your Member of Parliament urging cross-partisan support for the people of Iran. Enter your information below to find your MP and generate an email.</p>
            <p class="note"><strong>Note:</strong> MPs often require your full address to verify you are a constituent.</p>
        </header>

        <form id="mp-form" novalidate>
            <fieldset>
                <legend>Your Information</legend>

                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name <span class="required">*</span></label>
                        <input type="text" id="firstName" name="firstName" required autocomplete="given-name">
                        <span class="error-message" id="firstName-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name <span class="required">*</span></label>
                        <input type="text" id="lastName" name="lastName" required autocomplete="family-name">
                        <span class="error-message" id="lastName-error"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Your Email <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required autocomplete="email">
                    <span class="hint">For your reference only - not sent or stored</span>
                    <span class="error-message" id="email-error"></span>
                </div>

                <div class="form-group">
                    <label for="streetAddress">Street Address <span class="required">*</span></label>
                    <input type="text" id="streetAddress" name="streetAddress" required autocomplete="street-address">
                    <span class="error-message" id="streetAddress-error"></span>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="city">City <span class="required">*</span></label>
                        <input type="text" id="city" name="city" required autocomplete="address-level2">
                        <span class="error-message" id="city-error"></span>
                    </div>
                    <div class="form-group">
                        <label for="province">Province <span class="required">*</span></label>
                        <select id="province" name="province" required autocomplete="address-level1">
                            <option value="">Select province</option>
                            <option value="AB">Alberta</option>
                            <option value="BC">British Columbia</option>
                            <option value="MB">Manitoba</option>
                            <option value="NB">New Brunswick</option>
                            <option value="NL">Newfoundland and Labrador</option>
                            <option value="NS">Nova Scotia</option>
                            <option value="NT">Northwest Territories</option>
                            <option value="NU">Nunavut</option>
                            <option value="ON">Ontario</option>
                            <option value="PE">Prince Edward Island</option>
                            <option value="QC">Quebec</option>
                            <option value="SK">Saskatchewan</option>
                            <option value="YT">Yukon</option>
                        </select>
                        <span class="error-message" id="province-error"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="postalCode">Postal Code <span class="required">*</span></label>
                    <input type="text" id="postalCode" name="postalCode" required autocomplete="postal-code" placeholder="A1A 1A1" maxlength="7">
                    <span class="error-message" id="postalCode-error"></span>
                </div>

            </fieldset>

            <div class="cc-info">
                <strong>Your email will also be CC'd to:</strong>
                <ul>
                    <li>The Prime Minister's Office (pm@pm.gc.ca)</li>
                    <li>The Minister of Foreign Affairs, Hon. Anita Anand (anita.anand@international.gc.ca)</li>
                </ul>
            </div>

            <button type="submit" id="findMpBtn" class="btn btn-primary">
                <span class="btn-text">Find My MP</span>
                <span class="btn-loading" aria-hidden="true">Finding...</span>
            </button>
        </form>

        <section id="error-section" class="error-section hidden" aria-live="polite">
            <p id="error-message"></p>
            <p>You can also <a href="https://www.ourcommons.ca/members/en/search" target="_blank" rel="noopener noreferrer">find your MP manually on the Parliament website</a>.</p>
        </section>

        <section id="mp-result" class="mp-result hidden" aria-live="polite">
            <h2>Your Member of Parliament</h2>
            <div class="mp-info">
                <p><strong>Name:</strong> <span id="mpName"></span></p>
                <p><strong>Riding:</strong> <span id="mpRiding"></span></p>
                <p><strong>Email:</strong> <span id="mpEmail"></span></p>
            </div>

            <div class="email-editor">
                <h3>Customize Your Email</h3>
                <p class="editor-hint">Feel free to edit the subject and message below before sending.</p>

                <div class="editor-meta">
                    <p><strong>To:</strong> <span id="previewTo"></span></p>
                    <p><strong>CC:</strong> Prime Minister's Office &amp; Minister of Foreign Affairs</p>
                </div>

                <div class="form-group">
                    <label for="emailSubject">Subject</label>
                    <input type="text" id="emailSubject" name="emailSubject">
                </div>

                <div class="form-group">
                    <label for="emailBody">Message</label>
                    <textarea id="emailBody" name="emailBody" rows="12"></textarea>
                </div>
            </div>

            <p class="send-note"><strong>Why do I have to send it myself?</strong> Emails sent directly from your own account are more likely to be read by your MP's office â€” bulk messages from campaign tools are often filtered out. It also means we never see or store your information.</p>

            <div class="action-buttons">
                <a href="#" id="openEmailBtn" class="btn btn-primary">Open in Email Client</a>
                <a href="#" id="openGmailBtn" class="btn btn-gmail" target="_blank" rel="noopener noreferrer">Open in Gmail</a>
                <button type="button" id="copyEmailBtn" class="btn btn-secondary">Copy Email Text</button>
            </div>
            <p id="copyFeedback" class="copy-feedback hidden" aria-live="polite">Email text copied to clipboard!</p>
        </section>

        <p class="privacy-note">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            We do not store your address; email is generated in your browser.
        </p>
    </main>

    <footer>
        <p>Not affiliated with the Government of Canada.</p>
        <p>MP lookup powered by <a href="https://represent.opennorth.ca/" target="_blank" rel="noopener noreferrer">OpenNorth Represent</a>.</p>
    </footer>

    <script src="main.js"></script>
    <script data-goatcounter="https://canadasupportsiranians.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>
</html>
